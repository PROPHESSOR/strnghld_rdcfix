ACTOR STBoss 32767
{
//$Category Stronghold_Monsters
	Game Doom
	Health 100000
	Radius 48
	Height 128
	Scale 2
	Mass 50000
	Speed 6
	PainChance 1
	MinMissileChance 32
	MeleeRange 128
	Monster
	DamageFactor "STBoss", 0.01
	DamageFactor "STBossFactor", 0.05
	DamageFactor "SpiritBoss", 0.01
	DamageFactor "SpiritBossFactor", 0.05
	DamageFactor "Animate", 0.05
	damagefactor "bossfactor", 0.01
	DamageFactor "SmartBomb", 0
	damagefactor "corefriendly", 0
    DamageFactor "CoreFriendlyFire", 0
	//DropItem "SpiritBoss"
	+FLOORCLIP
	//A couple boss flags
	+BOSSDEATH +NORADIUSDMG +BOSS +NOICEDEATH +DONTRIP +DONTMORPH
	//Extremely aggressive
	+MISSILEMORE +MISSILEEVENMORE +LOOKALLAROUND
	//Very Persistent
	+NOTIMEFREEZE +NOBLOCKMONST
	//Exempt from infighting
	+NOINFIGHTING // +NOTARGET screws up target handling of A_Burst for some stupid reason I mean what even
	//Easily Distracted, to make him easier.
	+QUICKTORETALIATE
	SeeSound ""
	PainSound "baron/pain"
	DeathSound ""
	ActiveSound "baron/active"
	//Translation "16:47=32:47", "48:79=32:47", "112:127=160:167"
	Obituary "$STR_OB_STBOSS"
    Tag "$STR_MONSTERTAG_STBOSS"
	States
	{
	Spawn:	
		STBS A 1 A_Look
		loop

	Heal:
		STBS A 1
	See:
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		TNT1 A 0 A_JumpIfInventory("Clip",50,"LongTeleport")
		TNT1 A 0 NoiseAlert(0,0)
		TNT1 A 0 A_Jump(5,"Necromancy")
		TNT1 A 0 A_Jump(16, "Teleport")
		STBS AAAAAABBBBBBCCCCCCDDDDDD 1 A_VileChase
		Loop
	Necromancy:	
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		TNT1 A 0 A_JumpIfInventory("Clip",50,"LongTeleport")
		TNT1 A 0 A_Jump(15,"RaiseArmy")
		TNT1 A 0 A_Jump(45,"SpiritAttack")
		TNT1 A 0 A_Jump(5,"Haunting")
		STBS A 1 A_VileChase
		Loop
	Teleport:
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		TNT1 A 0 A_JumpIfInventory("Clip",50,"LongTeleport")
		TNT1 A 0 A_FaceTarget
        STBS AA 3
   		TNT1 A 0 A_UnSetShootable
   		STBS A 1 A_PlaySound("pyro/tele")
    	STBS A 1 A_SetTranslucent(0.90)
    	STBS A 1 A_SetTranslucent(0.80)
    	STBS A 1 A_SetTranslucent(0.70)
    	STBS A 1 A_SetTranslucent(0.60)
    	STBS A 1 A_SetTranslucent(0.50)
    	STBS A 1 A_SetTranslucent(0.40)
    	STBS A 1 A_SetTranslucent(0.30)
    	STBS A 1 A_SetTranslucent(0.20)
    	STBS A 1 A_SetTranslucent(0.10)
		//STBS A 1 A_Changeflag("NOGRAVITY", 1)
		//STBS A 1 A_Changeflag("FLOAT", 1)
    	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
    	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_ExtChase(0,0,1,1)
    	STBS A 1 A_PlaySound("pyro/tele")
    	STBS A 1 A_SetTranslucent(0.10)
    	STBS A 1 A_SetTranslucent(0.20)
    	STBS A 1 A_SetTranslucent(0.30)
    	STBS A 1 A_SetTranslucent(0.40)
    	STBS A 1 A_SetTranslucent(0.50)
    	STBS A 1 A_SetTranslucent(0.60)
    	STBS A 1 A_SetTranslucent(0.70)
    	STBS A 1 A_SetTranslucent(0.80)
    	STBS A 1 A_SetTranslucent(0.90)
    	STBS A 1 A_SetTranslucent(1.0)
    	TNT1 A 0 A_SetShootable
		//STBS A 1 A_Changeflag("FLOAT", 0)
		//STBS A 1 A_Changeflag("NOGRAVITY", 0)
		TNT1 A 0 A_Jump(32, "FireMissile")
		TNT1 A 0 A_JumpIfCloser(1024, "See")
		Loop
	LongTeleport:
		TNT1 A 0 A_TakeInventory("Clip",999)
		TNT1 A 0 A_FaceTarget
      	STBS AA 3
   		TNT1 A 0 A_UnSetShootable
   		STBS A 1 A_PlaySound("pyro/tele")
    	STBS A 1 A_SetTranslucent(0.90)
    	STBS A 1 A_SetTranslucent(0.80)
    	STBS A 1 A_SetTranslucent(0.70)
    	STBS A 1 A_SetTranslucent(0.60)
    	STBS A 1 A_SetTranslucent(0.50)
    	STBS A 1 A_SetTranslucent(0.40)
    	STBS A 1 A_SetTranslucent(0.30)
    	STBS A 1 A_SetTranslucent(0.20)
    	STBS A 1 A_SetTranslucent(0.10)
		//STBS A 1 A_Changeflag("NOGRAVITY", 1)
		//STBS A 1 A_Changeflag("FLOAT", 1)
		TNT1 A 0 A_Changeflag("SOLID", 0)
		TNT1 A 0 A_TakeInventory("Clip",999)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_ExtChase(0,0,1,1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Wander
		TNT1 A 0 A_TakeInventory("Clip",999)
		TNT1 A 0 A_Changeflag("SOLID", 1)
    	STBS A 1 A_PlaySound("pyro/tele")
    	STBS A 1 A_SetTranslucent(0.10)
    	STBS A 1 A_SetTranslucent(0.20)
    	STBS A 1 A_SetTranslucent(0.30)
    	STBS A 1 A_SetTranslucent(0.40)
    	STBS A 1 A_SetTranslucent(0.50)
    	STBS A 1 A_SetTranslucent(0.60)
    	STBS A 1 A_SetTranslucent(0.70)
    	STBS A 1 A_SetTranslucent(0.80)
    	STBS A 1 A_SetTranslucent(0.90)
    	STBS A 1 A_SetTranslucent(1.0)
    	TNT1 A 0 A_SetShootable
		//STBS A 1 A_Changeflag("FLOAT", 0)
		//STBS A 1 A_Changeflag("NOGRAVITY", 0)
		TNT1 A 0 A_TakeInventory("Clip",999)
		Goto FireMissile
	FireMissile:
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		TNT1 A 0 A_Jump(32,"FireNova")
		TNT1 A 0 A_Jump(32,"FireVolley")
		TNT1 A 0 A_Jump(32,"FireBall")
		TNT1 A 0 A_Jump(32,"ConvergeAttack")
		TNT1 A 0 A_Jump(32,"FireSpark")
		TNT1 A 0 A_Jump(32,"Eruption")
		STBS A 1 A_VileChase
		Loop
	CallingOfTheDamned:
		TNT1 A 0 A_Changeflag("NOPAIN",1)
		TNT1 A 0 A_JumpIfHealthLower(7500,"CallingOfTheDamned2")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		STBS E 3 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		STBS E 4 A_FaceTarget
		Goto CallingOfTheDamned+1
	CallingOfTheDamned2:
		TNT1 A 0 A_JumpIfHealthLower(5000,"CallingOfTheDamned3")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_CustomMissile("EruptionShot",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		STBS E 3 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot2",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		STBS E 4 A_FaceTarget
		Goto CallingOfTheDamned2
	CallingOfTheDamned3:
		TNT1 A 0 A_JumpIfHealthLower(2500,"CallingOfTheDamned4")
		TNT1 A 0 A_AlertMonsters
		STBS G 3 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot2",64,0,Random(0,360))
		STBS G 3 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot2",64,0,Random(0,360))
		Goto CallingOfTheDamned3
	CallingOfTheDamned4:
		TNT1 A 0 A_AlertMonsters
		STBS G 1 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STFireEffect",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot2",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
		STBS G 1 A_FaceTarget
		TNT1 A 0 A_CustomMissile("RainCometNullBoss",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("EruptionShot2",64,0,Random(0,360))
		STBS G 2 A_FaceTarget
		TNT1 A 0 A_CustomMissile("STBossAttack5B",64,0,Random(0,360))
		TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
		Goto CallingOfTheDamned4
	Melee:
		TNT1 A 0 A_Jump(64,"Missile")
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		STBS E 17 A_FaceTarget
		STBS F 18 A_FaceTarget
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("STFireEffect2", random(-160,160), random(-160,160), 0, 0, 0, 0, 0, SXF_SETMASTER)
		STBS G 35
		Goto See
	Missile:
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		TNT1 A 0 A_JumpIfInventory("Clip",50,"LongTeleport")
		TNT1 A 0 A_Jump(40,"FireNova")
		TNT1 A 0 A_Jump(36,"FireVolley")
		TNT1 A 0 A_Jump(32,"FireBall")
		TNT1 A 0 A_Jump(28,"ConvergeAttack")
		TNT1 A 0 A_Jump(24,"FireSpark")
		TNT1 A 0 A_Jump(20,"Eruption")
		TNT1 A 0 A_Jump(16,"RaiseArmy")
		TNT1 A 0 A_Jump(12,"SpiritAttack")
		TNT1 A 0 A_Jump(8,"Haunting")
		TNT1 A 0 A_Jump(4,"Hadouken")
		STBS A 1 A_VileChase
		Loop
	FireNova:
		STBS EF 3 A_FaceTarget
//		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,36,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,72,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,108,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,144,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,180,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,216,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,252,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,288,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,324,2,4)
		TNT1 A 0 A_CustomMissile("STBossAttack2",0,0,360,2,4)
		STBS G 3 A_FaceTarget
		Goto Missile
	FireVolley:
		STBS EF 8 A_FaceTarget
//		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS GGGGGGGG 2 A_CustomMissile("STBossAttack3")
		Goto See
	FireBall:
		STBS EF 4 A_FaceTarget
//		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		TNT1 A 0 A_CustomMissile("STBossAttack7",64,0,10)
		TNT1 A 0 A_CustomMissile("STBossAttack7",64,0,-10)
		STBS G 4 A_CustomMissile("STBossAttack7",64,0,0)
		Goto See
	ConvergeAttack:
		STBS EF 5 A_FaceTarget
//		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		TNT1 A 0 A_CustomMissile("STBossAttack1",64,0,20)
		TNT1 A 0 A_CustomMissile("STBossAttack1",64,0,-20)
		STBS G 5 A_CustomMissile("STBossAttack1",64,0,0)
		Goto See
	FireSpark:
		STBS EF 8 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS G 8 A_CustomMissile("STBossAttack9",0,0,0,2,4)
		Goto See
	Eruption:
		STBS EF 6 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS G 8 A_CustomBulletAttack(0,0,1,0,"Eruption")
		Goto See
	RaiseArmy:
		STBS H 8 A_FaceTarget
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		Goto See
	SpiritAttack:
		STBS H 8 A_FaceTarget
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack4",0,0,random(0,360))
		TNT1 A 0 A_AlertMonsters
		Goto See
	Haunting:
		STBS H 8 A_FaceTarget
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack6",0,0,random(0,360))
		TNT1 A 0 A_AlertMonsters
		Goto See
	Hadouken:
		STBS A 8 A_FaceTarget
		STBS A 1 A_Changeflag("NOGRAVITY", 1)
		TNT1 A 0 A_Changeflag("INVULNERABLE", 1)
		STBS A 1 ThrustThingZ(0,3,0,0)
		STBS AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEEEEEEEEEEEEEEEEEEEFFFFFFFFFF 3 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS FFFFFFFFFF 2 A_FaceTarget
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("RainCometNullBoss",0,0,Random(0,360))
		STBS G 70 A_CustomMissile("FinalFlash",75,0,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack4",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack5",0,0,random(0,360))
		STBS G 70 A_Changeflag("NOGRAVITY", 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack6",0,0,random(0,360))
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("STBossAttack5B",0,0,random(0,360))
		STBS G 35 A_Changeflag("INVULNERABLE", 0)
		Goto See
	Pain:
		TNT1 A 0 A_Changeflag("NOGRAVITY", 0)
		STBS H 1 A_Changeflag("INVULNERABLE", 0)
		STBS H 2 A_Pain
		TNT1 A 0 A_JumpIfHealthLower(10000,"CallingOfTheDamned")
		Goto Missile
	Death:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("SpiritCaller",0,0,random(0,360))
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect") //A_Mushroom("STBossPyroFlare",random(2,7))
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		//TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("SpiritCaller",0,0,random(0,360))	
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		//TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("SpiritCaller",0,0,random(0,360))	
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS I 8 A_GiveInventory("StrSTBossPyroFlareEffect")
		TNT1 A 0 A_SpawnItemEx("STFireEffect",0,0,0,0,0,0,0,160)
		STBS K 8 //A_GiveToTarget("AwardItem",999)
		STBS L 8 A_NoBlocking
		STBS MN 8
		//TNT1 A 0 A_SpawnItemEx("SpiritBoss",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TELEFRAG,0)
		STBS O 8 A_FadeOut(0.01)
		wait
	}
}

actor StrSTBossPyroFlareEffect : CustomInventory
{
    Inventory.MaxAmount 0
    +AUTOACTIVATE
    States
    {
      Pickup:
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOn")
        TNT1 A 0 A_Mushroom("STBossPyroFlare",random(2,7))
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOff")
        stop
    }
}

ACTOR RainCometNullBoss : RainCometNull
{
  +NOTIMEFREEZE
  states
  {
  Spawn:
    ZAP5 A 0 A_Jump(5,8)
    ZAP5 AAAAAA 1 A_Wander
    ZAP5 A 8 A_CustomMissile("FallingCometBoss",-24,random(0,128),random(0,360),6,random(1,89))
    Loop
  Death:
    ZAP5 A 0
    Stop
  }
}

ACTOR FallingCometBoss : FallingComet
{
    +NOTIMEFREEZE
    states
    {
    Spawn:
        COMT AAAABBBBCCCC 1 BRIGHT A_SpawnItemEx("FireTailBoss",0,0,0,0,0,0,0,128)
        Loop
    Death:
        TNT1 A 0 A_NoGravity
        COMT D 3 BRIGHT A_SpawnItemEx("CometDeathGlowBoss", 0, 0, 0, 0, 0, 0, 0, 128)
        COMT E 3 BRIGHT A_Explode(20,128,0)
        COMT E 0 A_SpawnItemEx("CometDeathBoss", 0, 0, 0, 0, 0, 0, 0, 128)
        Stop
    }
}

actor FireTailBoss : FireTail { +NOTIMEFREEZE }
actor CometDeathGlowBoss : CometDeathGlow { +NOTIMEFREEZE }
actor CometDeathBoss : CometDeath { +NOTIMEFREEZE }

ACTOR STBossPyroFlare : PyroFlare
{
   DamageType "Fire"
   Species ""
   -THRUSPECIES
   -THRUGHOST
   +NOTIMEFREEZE
   DeathSound "weapons/bang1"
   States
   {
   Spawn:
      TNT1 A 1 A_SpawnItemEx("STBossPyroFX",0,0,0,0,0,0,0,128)
      loop
   Death:
      FRFX HIJ 2 Bright
      FRFX J 0 A_Explode(64,64)
      FRFX J 0 A_SpawnItemEx("STBossPyroDropFire",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS)
      FRFX KLMNO 2 Bright
      stop
   }
}

ACTOR STBossPyroFX : PyroFX { +NOTIMEFREEZE }

ACTOR STBossPyroDropFire : DropFire
{
   DamageType "Fire"
   Species ""
   -THRUSPECIES
   -THRUGHOST
   +NOTIMEFREEZE
   States
   {
   Spawn:
      FLME A 0 Bright
      FLME A 0 Bright A_Playsound("weapons/onfire")
      FLME A 2 Bright A_Explode(5,32,0)
      FLME BCDEFGHIJKLMN 2 Bright A_Explode(5,16,0)
      FLME A 0 Bright A_Playsound("weapons/onfire")
      FLME A 2 Bright A_Explode(5,32,0)
      FLME BCDEFGHIJKLMN 2 Bright A_Explode(5,16,0)
      FLME A 0 Bright A_Playsound("weapons/onfire")
      FLME A 2 Bright A_Explode(5,32,0)
      FLME BCDEFGHIJKLMN 2 Bright A_Explode(5,16,0)
      FLME A 0 Bright A_Playsound("weapons/onfire")
      FLME A 2 Bright A_Explode(5,32,0)
      FLME BCDEFGHIJKLMN 2 Bright A_Explode(5,16,0)
      FLME A 0 Bright A_Playsound("weapons/onfire")
      FLME A 2 Bright A_Explode(5,32,0)
      FLME BCDEFGHIJKLMN 2 Bright A_Explode(5,16,0)
      FLME A 0 A_Jump(192,1)
      loop
   Death:
      TNT1 A 0
      stop
   }
}

ACTOR STBossAttack1 {
	+SEEKERMISSILE
	DamageType "STBossFactor"
	Speed 20
	Damage 12
	Radius 12
	Height 12
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.6
	Translation "112:127=160:167"
	+RANDOMIZE
	+NOTIMEFREEZE
	SeeSound "imp/attack"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR A 2 bright A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		STFR A 0 A_SeekerMissile(2,5)
		STFR A 2 bright A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		STFR A 0 A_SeekerMissile(2,5)
		loop
	Death:
		BAL7 C 6 Bright
		TNT1 A 0 A_Explode(48,256)
		TNT1 A 0 A_CheckSight("NoGen")
		TNT1 A 0 A_SpawnItem("KDBossSparkGen", 0, 10, 0)
		TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 10, 0)
		TNT1 A 0 A_SpawnItem("KDBossSmokeGen", 0, 10, 0)
		BAL7 DE 6 bright
		stop
	NoGen:
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(48,256,0)
		BAL7 DE 6 bright
		Stop
	}
}

ACTOR Eruption : BulletPuff
{
	+FLOORHUGGER
	+NOTIMEFREEZE
    +PUFFGETSOWNER
    +ALWAYSPUFF
    +PUFFONACTORS
	VSpeed 0
	States
  {
  Spawn:
  TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 90), 0, 128 | 8)
  TNT1 AAAAA 1 A_SpawnItemEx("STBossDropFire", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 90), 0, 1024 | 8)
  TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 90), 0, 128 | 8)
  TNT1 AAAAA 1 A_SpawnItemEx("STBossDropFire", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 90), 0, 1024 | 8)
  TNT1 A 0 A_SpawnItemEx("EruptionShotSpawner",0,0,0,0,0,0,0,1056)
  stop
  }
}

actor EruptionShotSpawner
{
    +NOTIMEFREEZE
    +NOCLIP
    +THRUACTORS
    Radius 24
    Height 32
    Projectile
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot",0,0,random(0,360),6,Random(85,90))
        TNT1 A 1 A_CustomMissile("EruptionShot2",0,0,random(0,360),6,Random(85,90))
        stop
    }
}

ACTOR EruptionShot
{
	+NOTIMEFREEZE
	DamageType "STBossFactor"
	Speed 20
	Damage 4
	Radius 24
	Height 32
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 1
	Translation "112:127=160:167"
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR A 1 bright //A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		loop
	Death:
		BAL7 C 0
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		//BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		//BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		TNT1 A 0 A_Explode(16,256,0)
		BAL7 CDE 6 bright
		stop
	}
}
ACTOR EruptionShot2 : EruptionShot
{
	states
	{
	Spawn:
		STFR B 1 bright //A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		loop
	}
}
/*
ACTOR EruptionA
{
	DamageType "STBossFactor"
	Speed 20
	Damage 16
	Radius 16
	Height 16
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 1
	Translation "112:127=160:167"
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR B 1 bright A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)	
		loop
	Death:
		BAL7 C 0
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(64,256,0)
      		BAL7 CCCCCCCCCCCC 0 Bright A_CustomMissile("EruptionB",random(8,24),0,random(0,360),2,random(0,90))
		BAL7 DE 6 bright
		stop
	}
}

ACTOR EruptionB
{
	DamageType "STBossFactor"
	Speed 20
	Damage 12
	Radius 16
	Height 16
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.75
	-NOGRAVITY
	Translation "112:127=160:167"
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR B 1 bright A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		loop
	Death:
		BAL7 C 0
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(48,256,0)
      		BAL7 CCCCCCCC 0 Bright A_CustomMissile("EruptionC",random(8,24),0,random(0,360),2,random(0,60))
		BAL7 DE 6 bright
		stop
	}
}
ACTOR EruptionC
{
	DamageType "STBossFactor"
	Speed 20
	Damage 8
	Radius 16
	Height 16
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.5
	-NOGRAVITY
	Translation "112:127=160:167"
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR A 1 bright A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)	
		loop
	Death:
		BAL7 C 0
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(32,256,0)
		BAL7 DE 6 bright
		stop
	}
}
*/
ACTOR STBossAttack2 {
	DamageType "STBossFactor"
	Speed 20
	Damage 1
	Radius 24
	Height 24
	FastSpeed 35
	Projectile
	+RIPPER
	+NOTIMEFREEZE
	+RANDOMIZE
	RenderStyle Add
	Alpha 1
	Scale 4
	SeeSound "vile/firestrt"
	DeathSound "vile/firecrkl"
	states
	{
	Spawn:
		TNT1 A 1 A_SpawnItemEx("KDBossBiggerFlame", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		Loop
	Death:
		TNT1 A 0 A_CheckSight("NoGen")
		TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		//TNT1 A 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("KDBossBiggerSmoke", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		FIRE CCBBCCBBCCBDCCDDCCDDEEDDEEDDEEFFEEFFEEFFGGHHGGHHGGHH 1 bright A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		stop
	NoGen:
		FIRE CCBBCCBBCCBDCCDDCCDDEEDDEEDDEEFFEEFFEEFFGGHHGGHHGGHH 1 bright //A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		stop
	}
}
ACTOR STBossAttack3 {
	DamageType "STBossFactor"
	Speed 20
	Damage 8
	Radius 18
	Height 18
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.5
	Translation "112:127=160:167"
	+RANDOMIZE
	+RIPPER
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR A 1 bright A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)	
		loop
	Death:
		BAL7 C 0
		TNT1 A 0 A_CheckSight("NoGen")
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(32,256,0)
		BAL7 DE 6 bright
		stop
	NoGen:
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		BAL7 C 6 bright A_Explode(32,256,0)
		BAL7 DE 6 bright
		Stop
	}
}

ACTOR STBossAttack4 {
	Translation Ice
	RenderStyle Add
	Alpha 1
	+NOTIMEFREEZE +SHOOTABLE +LOOKALLAROUND +NOPAIN -ISMONSTER -SOLID -FRIENDLY +NOICEDEATH +NOBLOOD
	Radius 16
	Height 16
	Health 1
	Speed 20
	ReactionTime 2
    Obituary "$STR_OB_STBOSSATTACK4"
    Tag "$STR_MONSTERTAG_STBOSSATTACK4"
	states
	{
	Spawn:
		SKUL A 0 BRIGHT A_JumpIfInventory("Clip",1,"Looking")
		SKUL A 0 BRIGHT A_GiveInventory("Clip",15)
	Looking:
		SKUL A 0 BRIGHT A_TakeInventory("Clip",1)
		SKUL A 0 BRIGHT A_JumpIfInventory("Clip",1,2)
		TNT1 A 0 A_Die
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Look
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Look
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Look
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Look
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Look
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Look
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Look
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Look
		loop
	See:
		SKUL A 0 BRIGHT A_TakeInventory("Clip",1)
		SKUL A 0 BRIGHT A_JumpIfInventory("Clip",1,2)
		TNT1 A 0 A_Die
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL A 0 BRIGHT A_Wander
		SKUL A 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		SKUL B 0 BRIGHT A_Wander
		SKUL B 1 BRIGHT A_Chase("Melee", "", CHF_FASTCHASE | CHF_RESURRECT )
		loop
	Melee:
		SKUL A 0 BRIGHT A_TakeInventory("Clip",1)
		SKUL A 0 BRIGHT A_JumpIfInventory("Clip",1,2)
		TNT1 A 0 A_Die
		SKUL CD 5 BRIGHT A_CustomMeleeAttack(Random(0,1)*2,"","","CoreFriendly")
		SKUL A 5 BRIGHT A_Recoil(-32)
		SKUL A 0 BRIGHT A_Stop
		goto See
	Heal:
		SKUL A 1 bright A_Die
	Death:
		SKUL AABB 3 BRIGHT A_FadeOut(0.1)
		loop
	}
}
ACTOR STBossAttack5
{
	Projectile
	+RIPPER -DROPOFF
	+BLOODLESSIMPACT
    +NOTIMEFREEZE
	Damage (0)
	Speed 20
	FastSpeed 15
	states
	{
	Spawn:
		TNT1 A 4 A_SpawnItemEx("STBossSkeletonB",0,0,0,0,0,0,0,0,224)
		loop
	Death:
		TNT1 A 0
		stop
	}
}

ACTOR STBossAttack5B: STBossAttack5
{
states
	{
	Spawn:
		TNT1 A 4 A_SpawnItemEx("STBossSkeleton2B",0,0,0,0,0,0,0,0,240)
		TNT1 A 4 A_SpawnItemEx("STBossSkeletonB",0,0,0,0,0,0,0,0,240)
		TNT1 A 4 A_SpawnItemEx("STBossAttack4",0,0,0,0,0,0,0,0,240)
		TNT1 A 4 A_SpawnItemEx("STBossAttack6",0,0,0,0,0,0,0,0,240)
		loop
	}
}

ACTOR STBossAttack6 : STBossAttack4
{
	states
	{
	Spawn:
		SKUL A 0 BRIGHT A_JumpIfInventory("Clip",1,"Looking")
		SKUL A 0 BRIGHT A_GiveInventory("Clip",75)
		goto Looking		
	}
}
ACTOR STBossAttack7
{
	DamageType "STBossFactor"
	Speed 20
	Damage 16
	Radius 18
	Height 18
	FastSpeed 35
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.75
	+RANDOMIZE
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR B 1 bright A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		loop
	Death:
		TNT1 A 0 bright A_CheckSight("NoGen")
		MISL B 6 bright A_Explode(64,256,0)
		MISL C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		MISL C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		MISL C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,18,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,36,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,54,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,72,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,90,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,108,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,126,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,144,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,162,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,180,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,198,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,216,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,234,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,252,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,270,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,288,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,306,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,324,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,342,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,360,6,4)
		MISL CD 6 bright
		stop
	NoGen:
		MISL B 6 bright A_Explode(64,256,0)
		MISL C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,18,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,36,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,54,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,72,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,90,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,108,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,126,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,144,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,162,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,180,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,198,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,216,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,234,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,252,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,270,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,288,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,306,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,324,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,342,6,4)
		MISL C 0 A_CustomMissile("STBossAttack2",0,0,360,6,4)
		MISL CD 6 bright
		Stop
	}
}
ACTOR STBossAttack8
{
	DamageType "STBossFactor"
	Speed 0
	Damage 1000
	Radius 24
	Height 24
	FastSpeed 35
	Projectile
	+RANDOMIZE
	RenderStyle Add
	Alpha 1
	Scale 4
	SeeSound "vile/firestrt"
	DeathSound "vile/firecrkl"
	
	ReactionTime 10
	
	+NOTIMEFREEZE

	states
	{
	Spawn:
		TNT1 A 0 A_Explode(random(0,random(0,1)),128,0)
		TNT1 A 1 A_SpawnItemEx("KDBossSmoke", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossFlame", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossBiggerSmoke", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossBiggerFlame", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		TNT1 A 0 A_CountDown
		Loop
	Death:
		TNT1 A 0 A_CheckSight("NoGen")
		TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("KDBossBiggerSmoke", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		FIRE A 0 A_PlaySound("vile/firecrkl")
		FIRE CBCBCDCDCDEDEDEFEFEFGHGHGH 2 bright A_Explode(random(0,random(0,100)),128,0)
		stop
	NoGen:
		FIRE A 0 A_PlaySound("vile/firecrkl")
		FIRE CBCBCDCDCDEDEDEFEFEFGHGHGH 2 bright A_Explode(random(0,random(0,100)),128,0)
		stop
	}
}
ACTOR STBossSkeleton 32766
{
	obituary "$STR_OB_STBOSSSKELETON"
    Tag "$STR_MONSTERTAG_STBOSSSKELETON"
    PainChance "Stunner", 160
	health 20
	scale 0.75
	radius 15
	height 42
	mass 20
	speed 8
	painchance 256
	dropitem "Soulsphere" 1
	seesound ""
	painsound ""
	deathsound "skeleton/death"
	activesound ""
	Translation "48:79=80:111","16:47=80:111","176:191=80:111","160:167=80:103",
		"128:151=88:103","232:235=104:105","236:239=110:111","13:15=107:111"
	MONSTER
	+FLOORCLIP +NOBLOOD +NOBLOCKMONST +DROPOFF
	states
	{
	Spawn:
		SKEL AB 10 A_Look
		loop
	See:
		SKEL AAAABBBBCCCCDDDDEEEEFFFF 1 A_Chase
		loop
	Melee:
		TNT1 A 0 A_FaceTarget
		SKEL G 6 A_SkelWhoosh
		SKEL H 6 A_FaceTarget
		SKEL I 6 A_CustomMeleeAttack(Random(1,Random(1,3)),"skeleton/melee","","CoreFriendly")
		goto See
	Pain:
        SKEL L 5
        SKEL L 5 A_Pain
        goto See
    Pain.Stunner:
        SKEL L 2 A_ChangeFlag("NoPain", 1)
        SKEL L 300 A_Pain
        SKEL L 0 A_ChangeFlag("NoPain", 0)
        goto See
	Pain.Animate:
        TNT1 A 0 A_Die("Animate")
        goto Death.Animate
	Death:
		SKEL LM 7
		SKEL N 7 A_Scream
		SKEL O 7 A_NoBlocking
		//SKEL PPPPPPP 1 A_SpawnItemEx("KDBossSmallerSmoke", Random(-7, 7), Random(-7, 7), 0, 0, 0, 0.01 * Random(1, 125), 0, 128, 0)
		SKEL P 7 //What the lag, tormentor.
		SKEL Q -1 A_Jump(128,"FadeOut")
		stop
        FadeOut:
		SKEL Q 2 A_FadeOut(0.1)
		wait
	Death.Animate:
		TNT1 A 0 A_SpawnItemEx("STFireEffectB",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("STBossSkeleton2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		stop
	Raise:
		SKEL QPONML 5
		goto See
	}
}

ACTOR STBossSkeletonB : STBossSkeleton
{
    +NOPAIN
	states
	{
	Spawn:
	Raise:
		SKEL QPONML 5
		TNT1 A 0 A_ChangeFlag("NOPAIN",0)
		goto Super::See
	Idle:
		goto Super::Spawn
	}
}

ACTOR STBossSkeleton2 : STBossSkeleton
{
	obituary "$STR_OB_STBOSSSKELETON2"
    Tag "$STR_MONSTERTAG_STBOSSSKELETON2"
	PainChance 192
	dropitem "Megasphere" 4
	PainChance "Animate", 0
	DamageFactor "Animate", 0
	Health 100
	Scale 0.85
	Translation "48:79=168:191","16:47=168:191","176:191=168:191","160:167=168:183",
		"128:151=172:183","232:235=187:188","236:239=190:191","13:15=188:191"
	states
	{
	Melee:
		TNT1 A 0 A_FaceTarget
		SKEL G 6 A_SkelWhoosh
		SKEL H 6 A_FaceTarget
		SKEL I 6 A_CustomMeleeAttack(20,"skeleton/melee","","CoreFriendly")
		goto See
    Pain.Animate:
        goto Super::Pain
	Death:
	Death.Animate:
		SKEL LM 7
		SKEL N 7 A_Scream
		SKEL O 7 A_NoBlocking
		SKEL PPPPPPP 1 A_SpawnItemEx("KDBossSmallerSmoke", Random(-7, 7), Random(-7, 7), 0, 0, 0, 0.01 * Random(1, 125), 0, 128, 0)
		SKEL Q -1 A_Jump(85,"FadeOut")
		stop
        FadeOut:
		SKEL Q 2 A_FadeOut(0.1)
		wait
	}
}

ACTOR STBossSkeleton2B : STBossSkeleton2
{
    +NOPAIN
	states
	{
	Spawn:
	Raise:
		SKEL QPONML 5
		TNT1 A 0 A_ChangeFlag("NOPAIN",0)
		goto STBossSkeleton::See
	Idle:
		goto STBossSkeleton::Spawn
	}
}

ACTOR STFireEffect {
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NOTIMEFREEZE
	Scale 4
	RenderStyle Add
	states {
	Spawn:
		FIRE ABABCDCDEFEFGHGH 2 bright A_SpawnItemEx("KDBossFlame", Random(-7, 7), Random(-7, 7), 0, 0, 0, 0.01 * Random(1, 125), 0, 128, 0)
		stop
	}
}

ACTOR STFireEffectB : STFireEffect { Scale 1.25 }

ACTOR STFireEffect2 {
	DamageType "STBoss"
	Speed 20
	Damage 1
	Radius 24
	Height 24
	FastSpeed 35
	Projectile
	+RIPPER
	+RANDOMIZE
	+NOTIMEFREEZE
	RenderStyle Add
	Alpha 1
	Scale 4
	SeeSound "vile/firestrt"
	DeathSound "vile/firecrkl"
	states
	{
	Spawn:
		TNT1 A 1 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
	Death:
		TNT1 A 0 A_CheckSight("NoGen")
		TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		//TNT1 A 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("KDBossBiggerSmoke", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		TNT1 A 0 A_Explode(128,128,0)
		FIRE ABABCDCDEFEFGHGH 2 bright A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		stop
	NoGen:
		TNT1 A 0 A_Explode(128,128,0)
		FIRE ABABCDCDEFEFGHGH 2 bright A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		stop
	}
}

// ============================== SFX Actors by KeksDose
// =====================================================
// By adjusting the reactiontime, you can adjust how
// many particles are spawned in the generator actors.

Actor KDBossSparkGen
{
	+NOTIMEFREEZE
	+NOINTERACTION
	+CLIENTSIDEONLY

	States
	{
	Spawn:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("KDBossSpark", 0, 0, 0, 0.1 * Random(0, 125), 0.1 * Random(0, 125), 0.1 * Random(0, 140), Random(0, 359), 128, 96)
		TNT1 A 1 A_SpawnItemEx("KDBossSpark", 0, 0, 0, 0.1 * Random(0, 125), 0.1 * Random(0, 125), 0.1 * Random(0, 140), Random(0, 359), 128, 96)
		Stop
	}
}

Actor KDBossSmokeGen : KDBossSparkGen
{	
	+NOTIMEFREEZE
	+NOINTERACTION
	+CLIENTSIDEONLY

	States
	{
	Spawn:
		TNT1 AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("KDBossSmoke", 0, 0, 0, 0.1 * Random(0, 12), 0.1 * Random(0, 12), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossSmoke", 0, 0, 0, 0.1 * Random(0, 12), 0.1 * Random(0, 12), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		Stop
	}
}

Actor KDBossSmokeGenNormal : KDBossSmokeGen
{	
	-NOTIMEFREEZE

	States
	{
	Spawn:
		TNT1 AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("KDBossSmokeNormal", 0, 0, 0, 0.1 * Random(0, 12), 0.1 * Random(0, 12), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossSmokeNormal", 0, 0, 0, 0.1 * Random(0, 12), 0.1 * Random(0, 12), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		Stop
	}
}

Actor KDBossFlameGen : KDBossSmokeGen
{
	+NOTIMEFREEZE
	+NOINTERACTION
	+CLIENTSIDEONLY

	States
	{
	Spawn:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		Stop
	}
}

Actor KDBossFlameGenNormal : KDBossFlameGen
{
	-NOTIMEFREEZE

	States
	{
	Spawn:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("KDBossFlameNormal", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossFlameNormal", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		Stop
	}
}

Actor KDBossSpark
{
	+NOTIMEFREEZE
	+NoBlockmap
	+NoInteraction
	+ClientSideOnly
	Radius 4
	Height 8
	Gravity 0.4
	RenderStyle Add
	Scale 0.15
	States
	{
	Spawn:
		PAO1 A 35 Bright
		PAO1 A 1 Bright A_FadeOut(0.05)
		wait
	}
}

Actor KDBossSmoke
{
	+NOTIMEFREEZE
	+NoInteraction
	+ClientSideOnly
	RenderStyle Translucent
	Scale 0.8
	Alpha 0.15
	
	States
	{
	Spawn:
		TNT1 A 0 A_Jump(256, "IdleA", "IdleB", "IdleC", "IdleD")
	IdleA:
		SMOK A 1 A_FadeOut(0.001)
		Loop
	IdleB:
		SMOK B 1 A_FadeOut(0.001)
		Loop
	IdleC:
		SMOK C 1 A_FadeOut(0.001)
		Loop
	IdleD:
		SMOK D 1 A_FadeOut(0.001)
		Loop
	}
}

Actor KDBossSmokeNormal : KDBossSmoke { -NOTIMEFREEZE }

Actor KDBossBiggerSmoke : KDBossSmoke { Scale 1.5 }
Actor KDBossSmallerSmoke : KDBossSmoke { Scale 0.5 }

Actor KDBossFlame
{
	+NOTIMEFREEZE
	+NoInteraction
	+ClientSideOnly
	RenderStyle Add
	Scale 0.6
	Alpha 0.4
	States
	{
	Spawn:
		TNT1 A 0 A_Jump(256, "IdleA", "IdleB", "IdleC", "IdleD")
	IdleA:
		FRED A 1 A_FadeOut(0.0125)
		Loop
	IdleB:
		FRED B 1 A_FadeOut(0.0125)
		Loop
	IdleC:
		FRED C 1 A_FadeOut(0.0125)
		Loop
	IdleD:
		FRED D 1 A_FadeOut(0.0125)
		Loop
	}
}

Actor KDBossFlameNormal : KDBossFlame { -NOTIMEFREEZE }

Actor KDBossBiggerFlame : KDBossFlame { Scale 1.25 }

/*ACTOR Hadouken //Not used anymore. The Old Hadouken Attack was spamming 15 of these.
{
	Speed 32
	Damage 32
	Mass 9001
	Radius 32
	Height 32
	FastSpeed 36
	Projectile
	RenderStyle Add
	Alpha 1
	DONTHURTSHOOTER
	+RANDOMIZE
	+RIPPER
	+FORCERADIUSDMG
	+LOWGRAVITY
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR A 1 bright A_SpawnItemEx("KDBossFlame", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 128, 0)
		loop
	Death:
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_CustomMissile("StBossAttack2", 0, 0, Random(0, 360)) //LAG ALL THE PROCESSORS
		TNT1 A 0 bright A_Explode(160,640,0) //BLOW UP ALL THE THINGS
		TNT1 C 0 A_SpawnItem("KDBossBiggerFlame", 0, 0, 0)
		FIRE CBCBCDCDCDEDEDEFEFEFGHGHGH 2 BRIGHT
		stop
	}
}*/

ACTOR FinalFlash : FastProjectile
	{
	Speed 48 //So not actually that fast
	Damage 1000
	Radius 48
	Height 64
	FastSpeed 64
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 3
	+RANDOMIZE
        +DONTREFLECT
	+NOTIMEFREEZE
	+FORCERADIUSDMG
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	DamageType "STBoss"
	states
	{
	Spawn:
		WLXP B 1 bright A_SpawnItemEx("FinalFlashTrail", Random(16,-16), Random(16,-16), Random(16,-16), Random(0,8) ,Random(0,8) ,Random(0,8) ,Random(0,360))
		TNT1 A 0 A_Explode(Random(224,256),160,0)
		WLXP B 1 bright A_SpawnItemEx("FinalFlashTrail", Random(16,-16), Random(16,-16), Random(16,-16), Random(0,8) ,Random(0,8) ,Random(0,8) ,Random(0,360))
		TNT1 A 0 A_Explode(Random(336,384),96,0)
		loop
	Death:
		TNT1 A 0 A_Explode(512,512,0)
		TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("FinalFlashDeath", 0, 0, 0)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-256,256), random(-256,256), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-256,256), random(-256,256), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-256,256), random(-256,256), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-256,256), random(-256,256), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-272,272), random(-272,272), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-272,272), random(-272,272), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-272,272), random(-272,272), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-272,272), random(-272,272), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-288,288), random(-288,288), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-288,288), random(-288,288), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-288,288), random(-288,288), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-288,288), random(-288,288), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-304,304), random(-304,304), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-304,304), random(-304,304), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-304,304), random(-304,304), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-304,304), random(-304,304), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-320,320), random(-320,320), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-320,320), random(-320,320), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-320,320), random(-320,320), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-320,320), random(-320,320), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-336,336), random(-336,336), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-336,336), random(-336,336), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-336,336), random(-336,336), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-336,336), random(-336,336), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-352,352), random(-352,352), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-352,352), random(-352,352), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-352,352), random(-352,352), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-352,352), random(-352,352), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-368,368), random(-368,368), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-368,368), random(-368,368), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-368,368), random(-368,368), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-368,368), random(-368,368), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-384,384), random(-384,384), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-384,384), random(-384,384), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-384,384), random(-384,384), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-384,384), random(-384,384), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-400,400), random(-400,400), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-400,400), random(-400,400), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-400,400), random(-400,400), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-400,400), random(-400,400), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-416,416), random(-416,416), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-416,416), random(-416,416), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-416,416), random(-416,416), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-416,416), random(-416,416), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-432,432), random(-432,432), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-432,432), random(-432,432), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-432,432), random(-432,432), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-432,432), random(-432,432), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-448,448), random(-448,448), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-448,448), random(-448,448), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-448,448), random(-448,448), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-448,448), random(-448,448), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-464,464), random(-464,464), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-464,464), random(-464,464), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-464,464), random(-464,464), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-464,464), random(-464,464), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-480,480), random(-480,480), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-480,480), random(-480,480), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-480,480), random(-480,480), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-480,480), random(-480,480), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-496,496), random(-496,496), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-496,496), random(-496,496), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-496,496), random(-496,496), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-496,496), random(-496,496), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		TNT1 A 1 A_SpawnItemEx("FlashFire", random(-512,512), random(-512,512), random(-128,128), 0, 0, 0, 0, SXF_TRANSFERPOINTERS)
		stop //There's probably a better way to code that but I don't care enough to change it
	}
}

ACTOR FinalFlashTrail
{   
   Radius 48
   Height 64
   Scale 2.5
   Speed 0
   PROJECTILE
   RENDERSTYLE ADD
   ALPHA 0.67
   +Nointeraction
   +NOTIMEFREEZE
   States
   {
   Spawn:
      WLXP B 1 A_FadeOut(0.025)
      loop
   }
}

ACTOR FinalFlashDeath : FinalFlashTrail
{
	States
	{
	Spawn:
		WLXP A 1 A_FadeOut(0.01)
		loop
	}
}

ACTOR FlashFire
	{
	Speed 0
	Damage 5
	Radius 64
	Height 112
	Projectile
	Alpha 1
	Scale 4
	RenderStyle Add
	+RANDOMIZE
	+FORCERADIUSDMG
	+FLOORHUGGER
	+RIPPER
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DamageType "STBoss"
    ReactionTime 1
	states
	{
	Spawn:
		FIRE H 0 bright
        FIRE H 1 bright A_Countdown
        loop
	Death:  
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(80,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE A 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(128,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE B 1 bright A_Explode(96,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE C 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(64,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE D 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(48,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE E 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE F 1 bright A_Explode(32,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE G 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		FIRE H 1 bright A_Explode(16,256,0)
		stop
	}
}
Actor STBossAttack9
{
	DamageType "Animate"
	Speed 12
	Damage (0)
	Radius 20
	Height 64
	FastSpeed 16
	Projectile
	RenderStyle Add
	Alpha 1
	Scale 0.33
	+RANDOMIZE
   	+NODAMAGETHRUST
   	+DONTSPLASH
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STFR B 1 bright
		loop
	Death:
		BAL7 C 6
		BAL7 C 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
		//BAL7 C 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
		BAL7 C 0 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 DE 6 bright
		TNT1 AA 17
		TNT1 A 18 A_SpawnItem("KDBossSparkGen", 0, 0, 0)
		BAL7 E 0 A_Burst("STBossDropFire")
		stop
	}
}

ACTOR STBossDropFire
{
   DamageType "Animate"
   Radius 16
   Height 8
   Damage 1
   PROJECTILE
   RENDERSTYLE ADD
   ALPHA 0.9
   DONTHURTSHOOTER
   -NOGRAVITY
   +LOWGRAVITY
   +FORCERADIUSDMG
   +NOEXPLODEFLOOR
   +NODAMAGETHRUST
   +DONTSPLASH
   +RIPPER
   +NOTIMEFREEZE
   States
   {
   Spawn:
      TNT1 A 0
      TNT1 A 0 A_Playsound("weapons/onfire")
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 2 A_Explode(2,32,0)
      TNT1 A 0 A_Jump(4,1)
      loop
      TNT1 A 0 A_SpawnItemEx("KDBossBiggerFlame", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
      TNT1 A 0 A_SpawnItem("KDBossFlameGen", 0, 0, 0)
   Death:
      TNT1 A 0 A_SpawnItem("KDBossSmokeGen", 0, 0, 0)
      stop
   }
}

ACTOR SpiritKnight : HellKnight
{
    Health 100
    MeleeDamage 5
    Translation Ice
    Alpha 0.6
    RenderStyle Translucent
    MissileType SpiritBall
    SeeSound "baron/sight"
    PainSound "baron/pain"
    DeathSound "baron/death"
    ActiveSound "baron/active"
    PainChance "Stunner", 96
    Obituary "$STR_OB_SPIRITKNIGHT"
    HitObituary "$STR_OB_SPIRITKNIGHTHIT"
    Tag "$STR_MONSTERTAG_SPIRITKNIGHT"
    +NOBLOCKMONST
    +NOICEDEATH
    +NOPAIN
    States
    {
      Spawn:
      Raise:
        BOS2 ONMLKJI 6
        TNT1 A 0 A_ChangeFlag("NOPAIN",0)
        goto See

      Idle:
        BOS2 AB 10 A_Look
        loop

      See:
        BOS2 AABBCCDD 3 A_Chase
        loop

      Melee:
      Missile:
        BOS2 EF 8 A_FaceTarget
        BOS2 G 8 A_ComboAttack
        goto See

      Pain.Stunner:
        BOS2 H 2 A_ChangeFlag("NoPain", 1)
        BOS2 H 300 A_Pain
        BOS2 H 0 A_ChangeFlag("NoPain", 0)
        goto See

      Death:
        TNT1 A 0 A_SpawnItem("KDBossIce",0,0)
        BOS2 I 6 A_FadeOut(0.1)
        TNT1 A 0 A_Scream
        BOS2 JKLMNO 6 A_FadeOut(0.1)
        stop
    }
}

ACTOR SpiritBall : BaronBall
{
    damage 4
    Translation Ice
    DamageType "SpiritBossFactor"
}

ACTOR SpiritCaller
{
	Projectile
	+RIPPER -DROPOFF
	+THRUACTORS
	+BLOODLESSIMPACT
    +NOTIMEFREEZE
	Damage (0)
	Speed 20
	FastSpeed 10
	states
	{
	Spawn:
		TNT1 A 2 A_SpawnItemEx("SpiritKnight",0,0,0,0,0,0,0,0,224)
		loop
	Death:
		TNT1 A 0
		stop
	}
}

ACTOR SpiritBoss 32765
{
    Health 50000
    Translation Ice
    Mass 100000
    Radius 48
    Height 128
    Alpha 0.8
    Scale 2
    Speed 8
    FastSpeed 10
    PainChance 1
    Renderstyle translucent
    MeleeRange 144
	DamageFactor "STBoss", 0
	DamageFactor "STBossFactor", 0
	DamageFactor "SpiritBoss", 0
	DamageFactor "SpiritBossFactor", 0
	DamageFactor "Animate", 0
	damagefactor "bossfactor", 0.01
	DamageFactor "SmartBomb", 0
	damagefactor "corefriendly", 0
    DamageFactor "CoreFriendlyFire", 0
	Monster
	+FLOORCLIP
	//A couple boss flags
	+BOSSDEATH +NORADIUSDMG +BOSS +NOICEDEATH +DONTMORPH +DONTRIP
	//Aggressive
	+LOOKALLAROUND +MISSILEEVENMORE
	//Very Persistent
	+NOTIMEFREEZE +NOBLOCKMONST
	//Exempt from infighting
	+NOINFIGHTING
	//Easily Distracted. Trust me, it's the only way you're going to win.
	+QUICKTORETALIATE
	Obituary "$STR_OB_SPIRITBOSS"
    Tag "$STR_MONSTERTAG_SPIRITBOSS"
    states
    {
	Spawn:
	STBS A 1 A_Look
	Loop

	See:
	TNT1 A 0 A_Jump(32,"Summon1","Summon1","Summon1","Summon1","Summon2","Summon2","Summon2","Summon3","Summon3","Summon4")
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	Loop

	Missile:
	TNT1 A 0 A_Jump(128,"Summon1","Summon1","Summon1","Summon1","Summon2","Summon2","Summon2","Summon3","Summon3","Summon4")
	TNT1 A 0 A_Jump(192,"SpiritShot1","SpiritShot2")
	SpiritNuke:
	STBS EF 11 A_FaceTarget
	TNT1 A 0 A_SpawnItem("STIceEffect", 0, 0, 0)
	STBS G 13 A_CustomMissile("SpiritNuke",64,0,0)
	Goto See

	SpiritShot1:
	STBS EF 6 A_FaceTarget
	STBS G 6 A_CustomMissile("SpiritShot1",64,0,0)
	Goto See

	SpiritShot2:
	STBS EF 8 A_FaceTarget
	STBS GGGG 4 A_CustomMissile("SpiritShot2",64,0,0)
	Goto See

	Summon1:
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	Goto See

	Summon2:
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	Goto See

	Summon3:
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	Goto See

	Summon4:
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS A 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS B 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS C 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	STBS D 1 A_VileChase
	TNT1 A 0 A_SpawnItemEx("PowerFTFire2", random(32,-32), random(32, -32), -24, 0, 0, 0, 0, SXF_SETMASTER)
	TNT1 A 0 A_CustomMissile("SpiritCaller",64,0,Random(0,360))
	Goto See

	Melee:
	STBS EF 16 A_FaceTarget
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-192,192), random(-192,192), 32, random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-192,192), random(-192,192), 32, random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-192,192), random(-192,192), 32, random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-192,192), random(-192,192), 32, random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-224,224), random(-224,224), Random(24,48), random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-224,224), random(-224,224), Random(24,48), random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-224,224), random(-224,224), Random(24,48), random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-224,224), random(-224,224), Random(24,48), random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-256,256), random(-256,256), Random(16,64), random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-256,256), random(-256,256), Random(16,64), random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-256,256), random(-256,256), Random(16,64), random(0,9), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 1
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PowerFTFire2", random(-256,256), random(-256,256), Random(16,64), random(0,12), random(0,6), random(0,3), 0, SXF_SETMASTER)
	STBS G 4
	Goto See

	Pain:
	Goto SpiritNuke
	
	Death:
	TNT1 A 0 A_GiveToTarget("AwardItem",10000) // 999 + 9001
	STBS IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII 5 A_GiveInventory("StrSpiritBossIceEffect") //A_Mushroom("STBossIce", Random(1,8))
	STBS I 8
	STBS J 8 Thing_Destroy(0,1)
	STBS K 8 ACS_Execute(910,0)
	STBS LMNO 8 A_FadeOut(0.2)
	Stop

	Heal:
	STBS A 1
	Goto See
    }
}

actor StrSpiritBossIceEffect : CustomInventory
{
    Inventory.MaxAmount 0
    +AUTOACTIVATE
    States
    {
      Pickup:
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOn")
        TNT1 A 0 A_Mushroom("STBossIce",Random(1,8))
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOff")
        stop
    }
}

ACTOR SpiritShot1
{
        DamageType "SpiritBoss"
	Speed 24
	FastSpeed 32
	Damage 3
	Mass 5
	Radius 20
	Height 20
	Projectile
	Scale 3
	Translation "Ice"
	Renderstyle Add
	Alpha 1
	+RANDOMIZE
	+SEEKERMISSILE
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STEM A 0 A_SeekerMissile(2,5)
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 1 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		loop
	Death:
		TNT1 A 0 A_SpawnItem("STIceEffect", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossBiggerIce", 0, 0, 0)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOn")
		TNT1 A 0 A_Mushroom("PowerFTFire2",12,MSF_DontHurt)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOff")
        TNT1 A 0 A_SetDamageType("SpiritBoss")
        TNT1 A 0 A_Explode(128,128,0)
		TNT1 AAAAAAAAAA 0 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAAAAAA 1 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAAAA 2 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAA 3 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AA 4 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		stop
	}
}

ACTOR SpiritShot2
{
        DamageType "SpiritBoss"
	Speed 24
	FastSpeed 32
	Damage 4
	Mass 5
	Radius 20
	Height 20
	Projectile
	Scale 3
	Translation "Ice"
	Renderstyle Add
	Alpha 1
	+RANDOMIZE
	+RIPPER
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 1 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		loop
	Death:
		TNT1 A 0 A_SpawnItem("STIceEffect", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossBiggerIce", 0, 0, 0)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOn")
		TNT1 A 0 A_Mushroom("PowerFTFire2",6,MSF_DontHurt)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOff")
        TNT1 A 0 A_SetDamageType("SpiritBoss")
        TNT1 A 0 A_Explode(128,128,0)
		TNT1 AAAAA 0 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAA 1 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAA 2 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AA 3 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 A 4 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		stop
	}
}

ACTOR SpiritNuke
{
    DamageType "SpiritBoss"
	Speed 30
	FastSpeed 40
	Damage 32
	Mass 5
	Radius 20
	Height 20
	Projectile
	Scale 4
	Translation "Ice"
	Renderstyle Add
	Alpha 1
	+RANDOMIZE
	+NOTIMEFREEZE
	SeeSound "vile/firestrt"
	DeathSound "imp/shotx"
	states
	{
	Spawn:
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 0 A_CustomMissile("PowerFTFire2NoDMG", 0, 0, Random(0,360),2,Random(0,360))	
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 0 A_CustomMissile("PowerFTFire2NoDMG", 0, 0, Random(0,360),2,Random(0,360))	
		STEM A 0 A_SpawnItemEx("PowerFTFire2", 0, 0, 0, 0.1 * Random(-6, 6), 0.1 * Random(-6, 6), 0.1 * Random(-2, 17), 0, 1024, 0)
		STEM A 1 A_CustomMissile("PowerFTFire2NoDMG", 0, 0, Random(0,360),2,Random(0,360))	
		loop
	Death:
		TNT1 A 0 A_SpawnItem("STIceEffect", 0, 0, 0)
		TNT1 A 0 A_SpawnItem("KDBossBiggerIce", 0, 0, 0)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOn")
		TNT1 A 0 A_Mushroom("PowerFTFire2",24,MSF_DontHurt)
        TNT1 A 0 A_GiveInventory("StrAMushroomBypassOff")
        TNT1 A 0 A_SetDamageType("SpiritBoss")
        TNT1 A 0 A_Explode(128,128,0)
		TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAAAAAAAAAAAAAA 1 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAAAAAAAAAA 2 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAAAAAA 3 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		TNT1 AAAA 4 A_CustomMissile("PowerFTFire2", 0, 0, Random(180,-180),6,Random(180,-180))
		stop
	}
}

ACTOR STBossIce : STBossAttack2
{
	Translation Ice
	DamageType "SpiritBossFactor"
	States
	{
	Spawn:
		TNT1 A 1 A_SpawnItemEx("KDBossBiggerIce", Random(-40, 40), Random(-40, 40), Random(0, 20), velx, vely, 0.1 * Random(-2, 80), 0, 128 | 8, 0)
		Loop
	Death:
		TNT1 A 0 A_CheckSight("NoGen")
		TNT1 A 0 A_SpawnItem("KDBossIceGen", 0, 0, 0)
		FIRE CCBBCCBBCCBDCCDDCCDDEEDDEEDDEEFFEEFFEEFFGGHHGGHHGGHH 1 bright A_SpawnItemEx("KDBossBiggerIce", Random(-60, 60), Random(-60, 60), Random(0, 30), velx, vely, 0.1 * Random(-2, 160), 0, 128 | 8, 0)
		stop
	NoGen:
		FIRE CCBBCCBBCCBDCCDDCCDDEEDDEEDDEEFFEEFFEEFFGGHHGGHHGGHH 1 bright
		stop
    }
}

Actor KDBossIceGen : KDBossFlameGen
{
	States
	{
	Spawn:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("KDBossIce", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		TNT1 A 1 A_SpawnItemEx("KDBossIce", 0, 0, 0, 0.1 * Random(0, 20), 0.1 * Random(0, 20), 0.1 * Random(0, 25), Random(0, 359), 128, 0)
		Stop
	}
}

ACTOR KDBossIce : KDBossFlame
{
	Translation Ice
}

ACTOR KDBossBiggerIce : KDBossBiggerFlame
{
	Translation Ice
}

ACTOR STIceEffect : STFireEffect
{
	Translation Ice
	Scale 4
	states {
	Spawn:
		FIRE ABABCDCDEFEFGHGH 2 bright A_SpawnItemEx("KDBossIce", Random(-7, 7), Random(-7, 7), 0, 0, 0, 0.01 * Random(1, 125), 0, 128, 0)
		stop
	}
}

ACTOR PowerFTFire2
{
   Radius 2
   Height 4
   Speed 16
   Damage 1
   Translation Ice
   PROJECTILE
   RENDERSTYLE ADD
   DamageType "SpiritBoss"
   ALPHA 0.67
   Scale 0.67
   SeeSound ""
   DeathSound ""
   DONTHURTSHOOTER
   +FORCERADIUSDMG
   +NOTIMEFREEZE
   States
   {
   Spawn:
      STEM A 2
      STEM BCD 2 A_Explode(Random(4,8),16,0)
      STEM EFG 2 A_Explode(Random(4,8),32,0)
      STEM HIJ 2 A_Explode(Random(4,8),48,0)
      STEM KJI 2 A_Explode(Random(4,8),64,0)
      STEM HGFEDCBA 1
      stop
   Death:
      TNT1 A 0 A_NoGravity
      STEM J 1 A_Explode(Random(8,12),96,0)
      STEM I 1 A_Explode(Random(8,12),72,0)
      STEM HGECA 1
      stop
   }
}

ACTOR PowerFTFire2NoDMG : PowerFTFire2
{
   Speed 8
   Damage (0)
   +NOINTERACTION
   +CLIENTSIDEONLY
   States
   {
   Spawn:
      STEM ABCDEFGHIJKJI 2
      STEM HGFEDCBA 1
      stop
   Death:
      TNT1 A 0 A_NoGravity
      STEM JIHGECA 1
      stop
   }
}
